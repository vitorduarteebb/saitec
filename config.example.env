# ============================================
# CONFIGURAÇÕES DO SERVIDOR
# ============================================

# Porta do servidor (padrão: 3000)
# Em produção, use uma porta padrão como 3000 ou configure via proxy reverso (nginx)
PORT=3000

# Ambiente: development | production
# Em produção, SEMPRE usar: NODE_ENV=production
# Isso desabilita logs detalhados no console e otimiza performance
NODE_ENV=development

# ============================================
# CONFIGURAÇÕES DO BANCO DE DADOS
# ============================================

# Host do MySQL (em produção, pode ser IP ou hostname do servidor)
DB_HOST=localhost

# Porta do MySQL (padrão: 3306)
DB_PORT=3306

# Usuário do MySQL (em produção, crie um usuário específico para a aplicação)
DB_USER=root

# Senha do MySQL (EM PRODUÇÃO: use senha forte e nunca commite no git)
DB_PASSWORD=blade1411

# Nome do banco de dados
DB_NAME=saitec_trends

# Configurações de Coleta
DEFAULT_NICHE=null
# null = qualquer nicho (não focar só em beleza)
# ou defina: beleza, moda, fitness, etc.
DEFAULT_COUNTRY=BR
MIN_VIEWS=0
# Filtro mínimo de curtidas para vídeos virais
# Padrão: 50.000 (vídeo relevante)
# Viral: 100.000
# Ultra viral: 500.000
MIN_LIKES=50000

# Configurações de Score
LIKES_WEIGHT=3
COMMENTS_WEIGHT=4
SHARES_WEIGHT=5

# Configurações de Filtros (separados por vírgula)
BLACKLIST_WORDS=porn,bet,casino,jogo,aposta

# Configurações de Score (pesos para cálculo)
VIEWS_WEIGHT=0.1
LIKES_WEIGHT=3
COMMENTS_WEIGHT=4
SHARES_WEIGHT=5

# ============================================
# CONFIGURAÇÕES ANTI-BLOQUEIO (SCRAPERS)
# ============================================

# Delays aleatórios entre ações do scraper (em milissegundos)
# Em produção, valores maiores reduzem chance de bloqueio mas aumentam tempo
DELAY_MIN_MS=1000
DELAY_MAX_MS=3000

# Delays entre requisições diferentes (ex: entre hashtags)
# Em produção, recomenda-se valores maiores (3000-6000)
DELAY_BETWEEN_MIN_MS=3000
DELAY_BETWEEN_MAX_MS=6000

# Timeout do Puppeteer ao inicializar navegador (em ms)
# Em produção, pode aumentar para 60000 se houver problemas
PUPPETEER_TIMEOUT=30000

# Timeout de carregamento de página (em ms)
# Em produção, pode aumentar para 60000 se conexão for lenta
PAGE_TIMEOUT=30000

# Modo headless do Puppeteer (true = sem interface gráfica)
# Em produção, SEMPRE usar: HEADLESS=true
HEADLESS=true

# ============================================
# SEGURANÇA E AUTENTICAÇÃO
# ============================================

# Rate limiting: máximo de requisições por IP em 15 minutos
# Em produção, ajuste conforme necessidade (padrão: 100)
RATE_LIMIT_MAX=100

# CORS: domínios permitidos (separados por vírgula)
# Em desenvolvimento: * (todos)
# Em produção: https://seudominio.com,https://www.seudominio.com
CORS_ORIGIN=*

# Token para acesso ao endpoint interno de coleta (/internal/run-collection)
# Usado pelo n8n ou scripts automatizados
# EM PRODUÇÃO: gere um token forte e aleatório (ex: openssl rand -hex 32)
INTERNAL_API_TOKEN=seu_token_secreto_aqui_mude_em_producao

# Token para acesso ao painel web (/painel)
# EM PRODUÇÃO: gere um token forte e aleatório (ex: openssl rand -hex 32)
# Acesso via header: x-panel-token: <token> ou query: ?token=<token>
PANEL_ACCESS_TOKEN=seu_token_painel_aqui_mude_em_producao

# PiPiAds (opcional)
# Habilitar/desabilitar uso do PiPiAds (true/false)
# false = não tenta chamar o PiPiAds, evita erros de conexão
USE_PIPIADS=false
PIPIADS_API_URL=https://api.pipiads.com/v1/trending
PIPIADS_API_KEY=sua_api_key_aqui

# ============================================
# CONFIGURAÇÕES DO APIFY (API ALTERNATIVA)
# ============================================

# Token da API do Apify (obtenha em: https://console.apify.com/account/integrations)
# A API do Apify é mais confiável que scraping direto e é usada como prioridade
# Se não configurado, o sistema usa scraping direto como fallback
APIFY_API_TOKEN=sua_api_token_aqui

# Usar API do Apify por padrão (true/false)
# true = usa Apify primeiro, fallback para scraping direto se falhar
# false = usa apenas scraping direto
USE_APIFY=true

# ============================================
# CONFIGURAÇÕES DE AGENDAMENTO AUTOMÁTICO
# ============================================

# Habilitar/desabilitar agendamento automático (true/false)
# Por padrão, está habilitado (true)
# Se desabilitar, a coleta só será feita manualmente via API ou script
SCHEDULER_ENABLED=true

# Horários de coleta automática (formato: horas separadas por vírgula)
# Exemplos:
#   "10" = apenas às 10h
#   "10,15,21" = às 10h, 15h e 21h
#   "0,6,12,18" = às 0h, 6h, 12h e 18h (4x por dia)
# Padrão: "10" (uma vez por dia às 10h)
COLLECTION_HOURS=10

# Timezone para agendamento (padrão: America/Sao_Paulo)
# Lista completa: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
# Exemplos: America/Sao_Paulo, America/New_York, Europe/London, UTC
TZ=America/Sao_Paulo

# Limite de tendências a coletar (padrão: 20)
COLLECTION_LIMIT=20

# Fontes de coleta (separadas por vírgula)
# Opções: tiktok_cc, pipiads, hashtag_scraper
COLLECTION_SOURCES=tiktok_cc,pipiads

# Hashtags para scraper (separadas por vírgula, com ou sem #)
# Só usado se hashtag_scraper estiver em COLLECTION_SOURCES
COLLECTION_HASHTAGS=#beleza,#promo

# Idioma para filtro (padrão: pt)
FILTER_LANGUAGE=pt

# ============================================
# CONFIGURAÇÕES DE FILTRO DE PAÍS (TikTok Creative Center)
# ============================================

# Filtro rígido de país para o scraper do TikTok Creative Center (true/false)
# true = modo rígido, filtra estritamente por país (só aceita país alvo explicitamente, ex: "Brazil" quando buscando BR)
# false = modo provisório, aceita vídeos globais também
# Padrão: true (modo rígido)
TIKTOK_STRICT_COUNTRY_FILTER=true

